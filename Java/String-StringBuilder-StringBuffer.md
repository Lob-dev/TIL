2020-10-04

**String**

  +  자바의 String은 불변 (immutable)으로 디자인이 되어있다. 즉, String이 만들어지면 수정이 불가 하다. 만약 불변이 아니였다면, 다른 String의 레퍼런스가 같은 메모리 주소를 가리키고 있다 내용이 바뀌게 되었을 때 영향을 받기 때문에 예측 불가능한 상황이 발생할 수 있다.

<br/>

**String Builder, String Buffer**

  + String Builder와 String Buffer는 가변으로 디자인이 되어있다.
  + String Builder와 String Buffer의 차이는 메서드의 synchronized 키워드 유무의 차이일 뿐이다.
  + Buffer에 존재하는 synchronized 키워드 메서드는 한번에 하나의 쓰레드 만 접근 가능하다. 그 외의 쓰레드는 Wait Queue에서 대기하기 때문에 Builder 보다 성능상 좋지 않은 것이다.

<br/>

**불변적인 객체의 메모리 할당 과정과 가변 객체의 할당 후 사용 과정의 차이**
+ String + 연산 : 문자열을 연산하여 새로 Heap에 띄우고 참조 변수에 덮어 씌우는 방식이다.
  + aaa + bbb + ccc -> aaa 생성 -> 끊음 -> aaabbb 생성 -> 끊음 aaabbbccc 생성
  + 참조의 연결, 문자열 연산, Heap 적재, 참조 끊음, 새로운 참조 연결 등.
+ String Buffer의 연산 :  생성한 버퍼값을 이용해서 메모리 공간에 추가하고, 해당 사이즈의 검증 하여 넘어설 때 영역을 추가하여 array copy를 통해 영역을 더 키우게 된다. 
  + 초기 영역 설정값을 16을 가지게 되며, 문자열을 입력받아 생성될 때도 길이 + 16의 영역이 증가된다.
  + 값이 추가될 때는 현재 길이 x 2 + 2 만큼 영역이 증가하는데 그 영역보다 더 큰 값을 받을 경우에는 그 값만큼 영역을 늘린다.

<br/>

**JDK 5+**
  + 해당 버전 이상부터는 생성될 문자열의 길이를 가늠할 수 없는 Loop 문이 아닌 이상 컴파일 과정에서 String Builder 을 생성하여 append 메서드를 사용한다.
  + 컴파일러가 연산의 과정을 최대한 간략하게 변경해준다.