2020.12.07

운영체제는 SW에게 여러가지 서비스를 제공하며, 이것을 각각의 ISR로 보유하고 있다.

SW가 운영체제에서 제공하는 서비스를 이용하기 위해서는 당연히 요청 혹은 호출이 수반되어야 하는 것인데, 이러한 것을 시스템 콜이라고 한다.

<br/>

### **시스템 콜의 종류**

- **프로세스 관리**
    - 프로세스 생성(fork), 실행(exec), 일시중단 (suspend), 종료 (exit)
    - 프로세스 속성 얻기, 설정하기
    - 프로세스 동기화를 위한 세마포 제공
- **메모리 관리**
    - 프로세스를 위한 메모리의 할당, 반납
    - 동적 메모리 할당 (malloc), 반납 (free)
    - 메모리 할당 현황 조회
- **파일 시스템 관리**
    - 파일 생성 (create), 열기 (open), 닫기 (close), 삭제 (unlink)
    - 파일 읽기 (read), 쓰기 (write, append)
    - 디렉터리 생성 (mkdir), 삭제 (rmdir)
    - 다른 디렉토리로 이동하기 (cd)
    - 속성 얻기, 설정하기 (fstat)
- **입출력 장치 관리**
    - 장치 열기 (open) , 닫기 (close)
    - 장치에서 읽어오고 쓰기
    - 장치 제어 (ioctl)

**시스템 콜을 사용하기 위해서는 일반적으로는 Parameter 를 제공하여야 한다.**

- **예를 들어 파일 시스템 콜의 경우에는 파일 이름, 경로명, 속성 등을 말한다.**

<br/>

### **시스템 콜의 실행 방식?**

CPU는 해당 요청을 받게되면 사용자 모드를 커널 모드로 변경하고 IDT (Interrupt Desctiprot Table) 에서 전달 받은 값을 이용하여  (PC에 값을 대입하고) 주소를 찾고 실행하게 된다.

System_call() 함수에서 넘겨받은 값(시스템 콜 번호)를 통해 해당 처리를 하는 함수로 이동하여 함수를 실행시키고 처리가 완료되면 CPU의 모드를 사용자 모드로 변경한다.

<br/>

**절차**

1. 사용자 → 커널 모드 (cpu)
2. 시스템 콜 함수를 통해 해당하는 함수 색인
3. 함수 실행
4. 커널 → 사용자 모드 (cput)