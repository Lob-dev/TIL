2021.01.21

### **마이크로서비스 아키텍처란?**

---

모놀리스 아키텍처와 같이 하나의 코드, 데이터베이스, 구조를 공유하고 관리하는 것이 아니라 독립된 팀이 각각의 서비스를 개발하고 느슨하게 연결하는 서비스 지향 아키텍처이다.

이 아키텍처는 서비스를 상대적으로 작게 유지하고 느슨하게 연결하기 위해 비즈니스 기능 단위로 나누는 것을 중점으로 둔다.

*각각의 서비스는 테스트, 빌드, 데이터, 배포를 독립된 팀이 따로 수행하게 된다.*

<br/>

### **마이크로서비스 아키텍처의 장점?**

---

- **빠르고 안정적인 배포가 가능하다.** 이는 특정 기능, 모듈의 변경이 다른 기능에 영향을 주지 않으므로 빠르게 기능을 추가하거나 변경할 수 있고, 기능을 테스트하는 것이 간편 해지므로 최종적으로 서비스를 출시, 배포하는데 걸리는 시간이 줄어든다.

<br/>

- **새로운 기술이나 기법을 유연하게 수용할 수 있다.** 이는 서비스, 기능 단위의 느슨한 결합으로 인해 얻을 수 있는 부수적인 효과이다. *검증할 범위, 기능 단위가 줄어든다.*

<br/>

- **개발팀의 효율적인 업무 수행이 가능하다.** 애플리케이션을 서비스 단위로 작게 나눔으로써 새로운 인력, 기존 인력이 하나의 서비스에 대해서만 집중적인 업무 처리를 진행한다.

<br/>

- **발생하는 장애를 작은 단위(기능, 모듈)에 격리시킬 수 있다.** 서비스, 기능 단위의 느슨한 결합을 통해 하나의 기능, 모듈에서 장애가 발생하더라도 전체 시스템에 영향을 주지 않는다.

<br/>

- **하나의 서비스에 대한 필요 자원과 스케일 요구 사항에 최적화된 환경을 구성하고 서비스할 수 있다.**

<br/>

- **각각의 기능, 서비스에 대한 자원 사용량을 세밀하게 체크할 수 있다.** 각 기능, 서비스별로 동작 흐름과 메모리 사용량, 컨테이너 사용량 등을 구분지어 확인할 수 있다.

<br/>
<br/>

### **마이크로서비스 아키텍처의 단점, 과제?**

---

*마이크로서비스 아키텍처는 항상 최선의 선택이 될 수 없다.*

- **마이크로서비스 구조는 모놀리식에 비해 매우 복잡한 구조를 가진다.**

<br/>

- **각 기능, 서비스가 통신하기 위해 많은 네트워크 비용이 발생한다.** 네트워크 호출은 지연과 전송 실패 등 여러 문제점이 발생할 여지를 만들며, 각 서비스의 로컬(장비) 시간이 맞지 않을 수 있으며, 사용되는 네트워크는 언제나 안정적인 상황임을 보장할 수 없고, 대역폭이나 보안 문제가 발생할 수 있다.

<br/>

- **데이터의 무결성과 일관성을 지키는 것이 어렵다.** 마이크로서비스의 분산되는 데이터들은 다양한 장소에서 존재하게 되는데, 이는 트랜잭션을 수행하는 것과 매번 최신의 값을 이용하는 것이 어렵기 때문에 다른 접근법으로 데이터를 관리하여야 한다. 보통 하나의 서비스는 다른 서비스의 데이터와 연관관계를 가짐으로 특별히 고려해야되는 사항이다.

<br/>

- **네트워크 요청과 데이터 직렬화는 시스템의 부하를 발생시킨다.** 이는 앞서 설명한 것처럼 각 서비스가 네트워크 요청을 통해 연관된 데이터를 받아 비즈니스 로직을 수행하는 구조이기 때문에 일반적으로 하나의 요청에 모든 요청 처리를 진행하는 모놀리식 시스템보다 성능을 많이 요구한다.

<br/>

- **일반적인 방식의 테스트, 도구를 사용하는 것은 어렵다.** 실 서비스에서 실행되는 의존성 있는 테스트 코드들을 실행하는 것은 어려운 일이다. 이를 해결하기 위해서 적합한 CI/CD환경을 구축하는 다른 접근법을 이용하여야 한다.

<br/>

- **서비스 버저닝과 통합 방식에 주의를 기울여야 한다.** 서비스 변경 사항은 주로 응집력있는 단위로 빌드, 테스트, 배포를 진행하게 된다. 서비스 변경 사항과 상위 / 하위 호환성을 관리하는 것 외에도 이전 버전과 함께 실행할 수 있음으로 호환성을 고려하여야한다.

<br/>

- **시스템 통합적인 모니터링, 로깅 관리가 어렵다.** 마이크로서비스 아키텍처에서는 관련된 이벤트들이 모두 다른 로깅 방법, 데이터 포맷을 가질 수 있으므로 연관지어 관리하는 것에 어려움을 겪을 수 있다.

<br/>

- **각각의 서비스, 기능은 각각의 서비스 의존성을 관리하고 설정을 구성하여야한다.**

<br/>

- **장애 격리와 기능의 정상 동작은 다른 이야기이다.** 마이크로서비스 아키텍처는 각 서비스의 장애를 격리하는 데 큰 도움을 주지만, 연관된 API의 오류로 인하여 필요한 데이터를 얻을 수 없는 상황이 발생하며 이는 해당 기능이 제대로 동작할 수 없다는 것을 의미한다.

<br/>

**학습 자료**

- 클라우드 네이티브